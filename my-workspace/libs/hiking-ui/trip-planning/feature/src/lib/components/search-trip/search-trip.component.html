<div
  class="search-trip-container"
  *transloco="let t; read: 'tripPlanning.searchTrip'"
>
  <form #searchTripForm="ngForm" (ngSubmit)="onSubmit()">
    <div>
      <mat-form-field
        [ngClass]="{
          'invalid-field': isInvalidLocation && submittedOnce,
          'valid-field': !(isInvalidLocation && submittedOnce)
        }"
        id="googleInputField"
        appearance="outline"
      >
        <mat-label>{{ t('enterLocation') }}</mat-label>
        <input
          #googlePlacesInput
          matInput
          ngx-google-places-autocomplete
          [options]="options"
          #placesRef="ngx-places"
          (onAddressChange)="handleAddressChange($event)"
          class="google-input theme-input"
          name="address"
          (keydown)="onKey()"
          (keydown.enter)="false"
          required
          [(ngModel)]="location"
        />
        <mat-error *ngIf="isInvalidLocation && submittedOnce">{{
          t('selectLocationError')
        }}</mat-error>
      </mat-form-field>
    </div>
    <div class="row text-center" id="datePickersContainer">
      <div class="col-12">
        <mat-form-field
          [ngClass]="{
            'invalid-field':
              (startDate.errors || endDate.errors) && submittedOnce,
            'valid-field': !(
              (startDate.errors || endDate.errors) &&
              submittedOnce
            )
          }"
          appearance="outline"
          id="dateRange"
        >
          <mat-label>{{ t('enterDateRange') }}</mat-label>
          <mat-date-range-input (click)="picker.open()" [rangePicker]="picker">
            <input
              class="theme-input"
              #startDate="ngModel"
              matInput
              matStartDate
              [placeholder]="t('startDate')"
              name="startDate"
              [(ngModel)]="searchTrip.startDate"
              required
              readonly
            />
            <input
              class="theme-input"
              #endDate="ngModel"
              matInput
              matEndDate
              name="endDate"
              [placeholder]="t('endDate')"
              [(ngModel)]="searchTrip.endDate"
              required
              readonly
            />
          </mat-date-range-input>
          <mat-datepicker-toggle
            matSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-date-range-picker #picker></mat-date-range-picker>
          <mat-error
            *ngIf="(startDate.errors || endDate.errors) && submittedOnce"
            >{{ t('selectAValidRangeError') }}</mat-error
          >
        </mat-form-field>
      </div>
    </div>
    <div class="text-center">
      <div class="col-12 mb-4 mt-2">
        <mat-slide-toggle
          [(ngModel)]="searchTrip.friendsOnly"
          name="friendsOnly"
          color="primary"
        >
          {{ t('friendsOnly') }}
        </mat-slide-toggle>
      </div>
      <div class="col-12">
        <button type="submit" class="btn btn-primary w-75">
          {{ t('seeTrips') }}
        </button>
      </div>
    </div>
  </form>
</div>
